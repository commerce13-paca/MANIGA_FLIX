<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>🇯🇲HOL.DEST 🗿 FLOX - Films Gratuits</title>
<style>
body { font-family: Arial,sans-serif; background:#111; color:#fff; margin:0; padding:0; }
header { background:#222; padding:20px; text-align:center; }
header h1 { margin:0; }
nav { display:flex; justify-content:center; background:#333; padding:10px; }
nav a { color:#fff; text-decoration:none; padding:10px 15px; margin:0 10px; }
nav a:hover { background:#444; }
.container { max-width:1000px; margin:20px auto; padding:0 15px; }
.video-card { background:#222; margin-bottom:20px; padding:15px; border-radius:10px; box-shadow:0 5px 10px rgba(0,0,0,0.5); }
.video-card h2 { margin-top:0; }
video, iframe { width:100%; border-radius:8px; margin-top:10px; }
.ad-banner { margin:15px 0; background:#333; padding:10px; text-align:center; border-radius:8px; }
.likes { margin-top:5px; font-size:0.9em; color:#ccc; }
.recommendations { background:#222; padding:10px; border-radius:8px; margin-top:15px; }
.recommendations h3 { margin-top:0; }
footer { background:#222; color:#aaa; text-align:center; padding:15px; margin-top:30px; }
button { padding:5px 10px; margin-left:10px; cursor:pointer; }
.consent-message { background:#444; color:#fff; padding:10px; margin:10px 0; border-radius:8px; text-align:center; }
.search-bar { margin: 20px 0; text-align:center; }
.search-bar input { padding:10px; width:80%; max-width:400px; border-radius:5px; border:none; }
.category { margin:10px 0; text-align:center; }
.category button { padding:5px 10px; margin:5px; cursor:pointer; background:#444; color:#fff; border:none; border-radius:5px; }
.category button:hover { background:#555; }
</style>
</head>
<body>

<header>
  <h1>🇯🇲HOL.DEST 🗿 FLOX</h1>
</header>

<nav>
  <a href="#videos">Vidéos</a>
  <a href="#premium">Premium</a>
  <a href="#contact">Contact</a>
</nav>

<div class="container" id="videos">
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Rechercher des films..." onkeyup="filterVideos()">
  </div>

  <div class="category">
    <button onclick="filterCategory('Tous')">Tous</button>
    <button onclick="filterCategory('Action')">Action</button>
    <button onclick="filterCategory('Comédie')">Comédie</button>
    <button onclick="filterCategory('Drame')">Drame</button>
  </div>

  <!-- Exemple Vidéo 1 -->
  <div class="video-card" data-title="Film Exemple 1" data-category="Action" data-video-id="6hROuWHaNJo">
    <h2>🎬 Film Exemple 1</h2>

    <div class="consent-message">
      Pour soutenir 🇯🇲HOL.DEST 🗿 FLOX et accéder au film, merci d’accepter les publicités.
    </div>

    <!-- Pré-roll publicité -->
    <video id="ad1" controls>
      <source src="publicites/pub1.mp4" type="video/mp4">
    </video>

    <!-- Iframe YouTube intégrée -->
    <iframe id="film1" src="https://www.youtube.com/embed/6hROuWHaNJo?rel=0&modestbranding=1" frameborder="0" allowfullscreen style="display:none;"></iframe>

    <div class="ad-banner"><p>Publicité obligatoire ici</p></div>
    <div class="likes">
      👍 <span id="like1">0</span> Likes | 👁️ <span id="views1">0</span> vues
      <button onclick="likeVideo('like1')">Like</button>
    </div>
    <div>
      <p>Vues réelles: <span id="viewCount1">0</span></p>
      <p>Likes réels: <span id="likeCount1">0</span></p>
      <p>Commentaires: <span id="commentCount1">0</span></p>
    </div>
  </div>

  <!-- Exemple Vidéo 2 -->
  <div class="video-card" data-title="Film Exemple 2" data-category="Comédie" data-video-id="dQw4w9WgXcQ">
    <h2>🎬 Film Exemple 2</h2>

    <div class="consent-message">
      Pour soutenir 🇯🇲HOL.DEST 🗿 FLOX et accéder au film, merci d’accepter les publicités.
    </div>

    <video id="ad2" controls>
      <source src="publicites/pub2.mp4" type="video/mp4">
    </video>

    <iframe id="film2" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0&modestbranding=1" frameborder="0" allowfullscreen style="display:none;"></iframe>

    <div class="ad-banner"><p>Publicité obligatoire ici</p></div>
    <div class="likes">
      👍 <span id="like2">0</span> Likes | 👁️ <span id="views2">0</span> vues
      <button onclick="likeVideo('like2')">Like</button>
    </div>
    <div>
      <p>Vues réelles: <span id="viewCount2">0</span></p>
      <p>Likes réels: <span id="likeCount2">0</span></p>
      <p>Commentaires: <span id="commentCount2">0</span></p>
    </div>
  </div>

</div>

<footer id="contact">
  <p>© 2025 🇯🇲HOL.DEST 🗿 FLOX</p>
</footer>

<script>
// Pré-roll et affichage iframe après fin de pub
function setupPreroll(adId, filmId, viewsId) {
  const adVideo = document.getElementById(adId);
  const filmIframe = document.getElementById(filmId);
  const viewsCounter = document.getElementById(viewsId);

  adVideo.onended = function() {
    adVideo.style.display = 'none';
    filmIframe.style.display = 'block';
    viewsCounter.textContent = parseInt(viewsCounter.textContent) + 1;
  };

  adVideo.play();
}

setupPreroll('ad1','film1','views1');
setupPreroll('ad2','film2','views2');

function likeVideo(id) {
  const el = document.getElementById(id);
  el.textContent = parseInt(el.textContent)+1;
}

function filterVideos() {
  const search = document.getElementById('searchInput').value.toLowerCase();
  document.querySelectorAll('.video-card').forEach(card=>{
    card.style.display = card.dataset.title.toLowerCase().includes(search)?'block':'none';
  });
}

function filterCategory(category) {
  document.querySelectorAll('.video-card').forEach(card=>{
    card.style.display = (category==='Tous'||card.dataset.category===category)?'block':'none';
  });
}

// SupaData API pour stats réelles
const apiKey = 'sd_40824eaea463917cb71223fdb69a7b16';
document.querySelectorAll('.video-card').forEach((card, index)=>{
  const videoId = card.dataset.videoId;
  fetch(`https://api.supadata.ai/v1/youtube/video?videoId=${videoId}`,{
    headers:{'x-api-key':apiKey}
  })
  .then(res=>res.json())
  .then(data=>{
    card.querySelector(`#viewCount${index+1}`).textContent = data.viewCount;
    card.querySelector(`#likeCount${index+1}`).textContent = data.likeCount;
    card.querySelector(`#commentCount${index+1}`).textContent = data.commentCount;
  })
  .catch(err=>console.error('Erreur API SupaData:',err));
});
</script>

<!-- Consent Manager RGPD/CCPA -->
<script type="text/javascript" async>
(function(){
  var host="www.themoneytizer.com";
  var element=document.createElement('script');
  var firstScript=document.getElementsByTagName('script')[0];
  var url='https://cmp.inmobi.com/choice/6Fv0cGNfc_bw8/'+host+'/choice.js?tag_version=V3';
  element.async=true;
  element.type='text/javascript';
  element.src=url;
  firstScript.parentNode.insertBefore(element,firstScript);
})();
</script>

</body>
</html>
